@using CollectionsOnline.Core.Models
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<System.Collections.Generic.IEnumerable<Media>>
@if (Model.Any())
{
    <figure id="media">
        <div class="media-holder">
            @if (Model.Count() > 1)
            {
                <a class="previous icon-left-arrow inactive" tabindex="-1"></a>
            }
            <div class="hero-media">
            @if (Model.First() is ImageMedia)
            {
                var image = Model.First() as ImageMedia;
                <img class="image" src="@image.Medium.Uri" alt="@image.AlternativeText" />
            }
            else if (Model.First() is VideoMedia)
            {
                var video = Model.First() as VideoMedia;
                <img class="video" src="@video.Medium.Uri" alt="@video.AlternativeText" />
            }
            </div>
            @if (Model.Count() > 1)
            {
                <a class="next icon-right-arrow" tabindex="0"></a>
            }
        </div>
        <figcaption>
            <div class="wrapper"> 
                <div class="caption">
                    <span class="caption-text">
                    @if (!string.IsNullOrWhiteSpace(Model.First().Caption))
                    {
                        @Html.Raw(Model.First().Caption)
                    }
                    </span>
                    <span class="creators">
                    @for (int i = 0; i < Model.First().Creators.Count; i++)
                    {
                        @Model.First().Creators[i]@(i != Model.First().Creators.Count - 1 ? ", " : "")
                    }
                    </span>
                    <span class="sources">
                    @if (Model.First().Sources.Any())
                    {
                        @:Source:
                        for (int i = 0; i < Model.First().Sources.Count; i++)
                        {
                            @Model.First().Sources[i]@(i != Model.First().Sources.Count - 1 ? ", " : "")

                        }
                    }
                    </span>
                    <span class="credit">
                    @if (!string.IsNullOrWhiteSpace(Model.First().Credit))
                    {
                        @:Credit: @Model.First().Credit
                    }
                    </span>
                    <span class="rights-statement">
                    @if (!string.IsNullOrWhiteSpace(Model.First().RightsStatement))
                    {
                        if (Model.First() is ImageMedia)
                        {
                            @:This image is: @Model.First().RightsStatement
                        }
                        else if (Model.First() is VideoMedia)
                        {
                            @:This video is: @Model.First().RightsStatement
                        }
                    }
                    </span>
                </div>
                <div class="media-tools">
                    <button class="icon fullscreen @((Model.First() is VideoMedia) ? "disabled" : null)">
                        <span class="icon" aria-hidden="true"></span>
                        <span class="icon-label-hidden">View full screen</span>
                    </button>
                </div>
            </div>
        </figcaption>
    </figure>
    if (Model.Count() > 1)
    {
        <div id="objectthumbs">
            <div class="thumbnails wrapper">
                @foreach (var media in Model)
                {
                    if (media is ImageMedia)
                    {
                        var image = media as ImageMedia;
                        <div class="thumbnail">
                            <img tabindex="0" @(Html.Raw((image.Irn == Model.First().Irn) ? "class=\"active\"" : null)) src="@image.Thumbnail.Uri" alt="@image.AlternativeText" />
                        </div>
                    }
                    else if (media is VideoMedia)
                    {
                        var video = media as VideoMedia;
                        <div class="thumbnail">
                            <img class="video-overlay" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAACI7Fo9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjE0ODBGQUUyNDcwMTFFNUFFRDRDREE5NTgzQzkwQzkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjE0ODBGQUYyNDcwMTFFNUFFRDRDREE5NTgzQzkwQzkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MTQ4MEZBQzI0NzAxMUU1QUVENENEQTk1ODNDOTBDOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2MTQ4MEZBRDI0NzAxMUU1QUVENENEQTk1ODNDOTBDOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pnu2DecAAAQpSURBVHja7N1PiMxxHMbx3wrtTsppc9iS8v9PESLk4ELhwEEicXLYg6RIKSkXKcSJ4kJELhQiJyWKEAcHByVxkIMUQ6LxTDMHFymz0/Ld16ue9v5p32Z+2d3paTQaFVC2UU4AQgeEDggdEDogdEDogNABoYPQAaEDQgeEDggdEDogdEDoIHRA6IDQAaEDQgeEDggdEDoIHRA6IHRA6IDQAaEDQgeEDggdhA4IHRA6IHRA6IDQAaEDQgehA0IHhA4IHRA6IHRA6IDQQeiA0AGhA0IHhA4IHRA6IHRA6CB0QOiA0AGhA0IHhA4IHRA6CB0QOiB0QOiA0AGhA0IHhA5CB4QOCB0QOiB0QOiA0AGhA0IHoQNCB4QOCB0QOiB0QOiA0EHogNCB/9JoJ+hMvV7vz5cT2fqs10WG1Pfsbra1Vqu9cY6/19NoNFyhs9Bv5csql+iqmwl9tTMIfThD/5YvY1yiu6/sCd2NPaMPK9+AHjGFDggdEDogdEDogNBB6IDQAaEDQmcoPM6+OgNCL9v5bHp2ySkQetleZ5uyZdkD50DoZbufLcm2ZG+dA6GXq/n7xheyqdmBrO4kCL1cX7KD2bTsXPsfAIROoZpv4bdli7J7ziF0yvYoW55tzF45h9Ap+/n9cjYz25d9chKhU67mD9gcyqZkZzy/C52yvcu2Z/OzO84hdMr2NFtRtf4m/UvnEDplu5rNynZnH51D6JSr+ffpj1atH7g5lf1wEqFTrvfZYDY3u+0cQqdsz6vWR02tzV44h9Ap241sTrYz++AcQgf+UT7Tij9Zkx3JZjiF0CnP7OxYttIpvHWnPP3ZyeyZyL2iU56x2Y5sfzbeOYROeda1n8MnO4XQKc+89nP4CqfwjE55JmSnsyci94pOeXqzXVXrj0+Mcw6hU5aebEN2OJvkHEKnPAuz41XrQx7wjE5hBrKz2UOR4xW9PH3ZnmxvVnMOhF7ec/jm9nP4gHMg9PIsrVr/H77YKfCMXp6J2cWq9UksIuf3b/caDX/auxP1en24Dvi4av2GWe9IuHOtVuvx3eat+0i0wAnw1h0QOggdEDogdEDogNABoQNCB4TeFV+doOs+O4HQh9t1J+i6a07QGT/r3rnB9tfmZ5T1OceQv1u68suN+Ut+ew28dQeEDggdEDogdEDogNABoYPQAaEDQgeEDggdEDogdEDoIHRA6IDQAaEDQgeEDggdEDoI3QlA6IDQAaEDQgeEDggdEDogdBA6IHRA6IDQAaEDQgeEDggdhA4IHRA6IHRA6IDQAaEDQgehA0IHhA4IHRA6IHRA6IDQAaGD0AGhA0IHhA4IHRA6IHRA6CB0QOiA0AGhA0IHhA4IHRA6CB0QOiB0QOiA0AGhA0IHhA4IHYQOCB0QOiB0QOiA0AGhA0IHoQNCB4QO/KN+CjAABshpQyAya6gAAAAASUVORK5CYII="/>
                            <img tabindex="0" @(Html.Raw((video.Irn == Model.First().Irn) ? "class=\"active\"" : null)) src="@video.Thumbnail.Uri" alt="@video.AlternativeText" />
                        </div>
                    }
                }
            </div>
        </div>
    }
}